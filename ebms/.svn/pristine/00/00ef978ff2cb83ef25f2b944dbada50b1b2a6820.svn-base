@model EBMS.Models.T_Assets
@{
    ViewBag.Title = "ViewAssetsEdit";
    Layout = "~/Views/Shared/_Main_Layout.cshtml";
}

<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript">
   
    $(function () {
        var flag = 0;
        $("#btnSave").click(function () {
            if ($("#EditForm").valid() && flag == 0) {
                flag = 1;
                loading(0);
                $.ajax({
                    url: "/FixedAssets/ViewAssetsEditSave",
                    type: "Post",
                    data: $("#EditForm").serialize(),
                    dataType: "json",
                    success: function (data) {
                        if (data > 0) {
                            $.messager.alert("提示", "保存成功", "info", function () {
                                loading(1);
                                window.location.reload();
                            })
                        }
                        else {
                            loading(1)
                            $.messager.alert("提示", "保存失败", "info");
                            flag = 0;
                            
                        }
                    },
                    error: function (data) {
                        loading(1);
                        flag = 0;
                        $.messager.alert('提示', data, "info");
                    }
                });

            }
        })
    })
   
  
    function openUpload() {

        $('#Iframeupload')[0].src = "ViewUploadPic";
        $('#uploadDiv').dialog('open');

    }
</script>
<style>
    .lab {
  width: 110px; 
  text-align: right;}
</style>
@using (Html.BeginForm("EditForm", "Controllers", null, FormMethod.Post, new { Id = "EditForm" }))
{
<div class="mvctool">
     <a id="btnSave" href="javascript:;" class="modal-btn modal-btn-save">保存</a>
</div>
  
    if (ViewData["isManager"].ToString() == "1")
    {  
 @Html.ValidationSummary(true)
    <table class="fromEditTable setTextWidth300">
       
        <tbody>
             <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.TypeCode)：   
                </td>
                <td>
                    @Html.DropDownListFor(model => model.TypeCode, ViewData["TypeCodeList"] as List<SelectListItem>)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.TypeCode)
                </td>
            </tr>   
             <tr>
                <td class="lab">
                    @Html.LabelFor(model => model.Code)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Code, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Code)
                </td>

             </tr>

            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Pic)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Pic, new { @onclick = "openUpload()", @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Pic)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Name)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Name)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Name)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Spec)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Spec)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Spec)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Cost)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Cost)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Cost)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Buyer)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Buyer)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Buyer)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.BuyFrom)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.BuyFrom)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.BuyFrom)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Guarantee)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Guarantee)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Guarantee)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.BuyDate)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.BuyDate, new { @class = "easyui-datebox" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.BuyDate)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Department)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Department)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Department)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Owner)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Owner)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Owner)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Place)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Place)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Place)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Responsible)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Responsible)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Responsible)
                </td>
            </tr>      
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Memo)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Memo)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Memo)
                </td>
            </tr>     
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Barcode)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Barcode)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Barcode)
                </td>
            </tr>     
              
            </tbody>
        </table>
    }
    else
    {
    @Html.ValidationSummary(true)
    <table class="fromEditTable setTextWidth300">
       
        <tbody>
             <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.TypeCode)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.TypeCode, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.TypeCode)
                </td>
            </tr>   
             <tr>
                <td class="lab">
                    @Html.LabelFor(model => model.Code)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Code, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Code)
                </td>

             </tr>

            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Pic)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Pic, new {  @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Pic)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Name)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Name, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Name)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Spec)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Spec, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Spec)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Cost)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Cost, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Cost)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Buyer)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Buyer, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Buyer)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.BuyFrom)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.BuyFrom, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.BuyFrom)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Guarantee)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Guarantee, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Guarantee)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.BuyDate)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.BuyDate, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.BuyDate)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Department)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Department)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Department)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Owner)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Owner, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Owner)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Place)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Place)
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Place)
                </td>
            </tr>    
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Responsible)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Responsible, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Responsible)
                </td>
            </tr>      
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Memo)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Memo, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Memo)
                </td>
            </tr>     
            <tr>
                 <td class="lab">
                    @Html.LabelFor(model => model.Barcode)：   
                </td>
                <td>
                    @Html.TextBoxFor(model => model.Barcode, new { @readonly = "readonly" })
                </td>
                  <td>
                    @Html.ValidationMessageFor(model => model.Barcode)
                </td>
            </tr>     
              
            </tbody>
        </table>
    }
}
<div id="uploadDiv" class="easyui-dialog" closed="true" modal="true" title="上传" style="width:300px; height:200px;" resizable="true" closable="true">
    <iframe scrolling="yes" id='Iframeupload' frameborder="0" src="" style="width:100%;height:98%;"></iframe>
</div>
